<html>
	<body>
		<h2>Dictionary</h2>

			<label for="word-input"> Enter word </label><br>
			<input type="text" id="word-input" >
			<button id="submit-btn" > Search </button><br><br>
			<label for="token-input"> Enter token </label><br>
			<input type="text" id="token-input" >
			<button id="meaning-btn"> Query </button>

		<p id="resp-text"></p>

		<table>
			<tbody>
				<tr>
					<td>  word  </td>
					<td>  token </td>
				</tr>
			</tbody>
		</table>

		<script>
			submitbtn = document.getElementById("submit-btn");
			submitbtn.addEventListener("click", makeWordQuery);
			
			resp_para = document.getElementById("resp-text");
			function makeWordQuery(e) {
				e.preventDefault();
				query_word = document.getElementById("word-input").value;
				url = window.location.origin + "/" + "cgi-bin/search?q-" + query_word;
				fetch(url)
					.then(res => {
						if(res.ok)
						{
							res.json()
								.then( data => { 
									resp_para.innerText = "token for " + query_word + " :" + data.resptext;
									
									tableBody = document.querySelector("tbody");
									table = document.querySelector("table");
									newRow = tableBody.insertRow();
									newCell = newRow.insertCell();
									newCell.textContent = query_word;
									newCell = newRow.insertCell();
									newCell.textContent = data.resptext;	

								});
						}
						else
								resp_para.innerText = "invalid request";
					});
				document.getElementById("word-input").value = "";
			}

			document.getElementById("meaning-btn").addEventListener("click", check_meaning);
			function check_meaning(e)
			{
				e.preventDefault();
				token = document.getElementById("token-input").value;
			
				url = window.location.origin + "/" + "cgi-bin/search?g-" + token;
				fetch(url)
					.then(res => {
							if(res.ok)
								res.json().then( data => resp_para.innerText = ("response :" + data.resptext));
							else
								resp_para.innerText = "invalid request."
					});	
				document.getElementById("token-input").value = "";
			}
		</script>
	</body>
</html>
